#ifndef SRC_MAIN_H_
#define SRC_MAIN_H_

#include <check.h>
#include <errno.h>
#include <limits.h>
#include <math.h>
#include <stdbool.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

#include "s21_decimal.h"

int dec_eq(s21_decimal x, s21_decimal y) {
    bool res = true;
    for (int i = 0; i < 3; i++) {
        if (x.bits[i] != y.bits[i]) {
            res = false;
        }
        if (x.value_type != y.value_type) {
            res = false;
        }
    }
    return res;
}

#define RANDOM_TEST_COUNT 5
#define RAND_INT rand()
// 79 228 162 514 264 337 593 543 950 335
#define DEC_MAX \
    { {0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0}, s21_NORMAL_VALUE }
// -79 228 162 514 264 337 593 543 950 335
#define DEC_MIN \
    { {0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, SIGNMASK}, s21_NORMAL_VALUE }
// 0
#define DEC_ZERO \
    { {0, 0, 0, 0}, s21_NORMAL_VALUE }
// 0.0 000 000 000 000 000 000 000 000 001
#define DEC_ZERO_ONE \
    { {1, 0, 0, 0x001C0000}, s21_NORMAL_VALUE }
// 1
#define DEC_ONE \
    { {1, 0, 0, 0}, s21_NORMAL_VALUE }
// -1
#define DEC_MINUS_ONE \
    { {1, 0, 0, SIGNMASK}, s21_NORMAL_VALUE }
#define SIGNMASK (unsigned int)0x80000000
#define SCALEMASK (unsigned int)0x00FF0000
#define SCALESHIFT 16
#define MAXSCALE 28
#define MAXINTSCALE 9

#define L 0
#define M 1
#define H 2
#define S 3

int random_int(int max) {
    if (max < 0) max = 100;
    return RAND_INT % max + 1;
}

int devider(int num) {
    int res = 1;
    for (int i = 2; i <= sqrt(num); i++) {
        if (num % i == 0) {
            res = num / i;
        }
    }
    return res;
}

// Static test case
s21_decimal tda_num1[] = {
    // 2916.0102783897345878340045873
    {
        {0b00000101101110101000110000110001,
         0b01101000111111001010101100010001,
         0b01011110001110001010101111110011,
         0b00000000000110010000000000000000},
        s21_NORMAL_VALUE},
    // 0.0102783843597345878340045873
    {
        {0b10011110001011001000110000110001,
         0b01010011100000111111101101100011,
         0b00000000010101010000010101010011,
         0b00000000000111000000000000000000},
        s21_NORMAL_VALUE},
    // 439743784329856348945.33567345
    {
        {0b10011101111001110010001101110001,
         0b10001001100000011100110101100001,
         0b10001110000101101100000011010111,
         0b00000000000010000000000000000000},
        s21_NORMAL_VALUE},
    // -46634572574.302445322843567345
    {
        {0b01011001110010011011010011110001,
         0b11100110010010101111110011001100,
         0b10010110101011110011011011011100,
         0b10000000000100100000000000000000},
        s21_NORMAL_VALUE},
    // 4629.6850177192764576435767843
    {
        {0b00101011000111111000101000100011,
         0b00010001010000100010000101000100,
         0b10010101100101111101101101011101,
         0b00000000000110010000000000000000},
        s21_NORMAL_VALUE},
    // 5.7848795493247532857432656543
    {
        {0b00110011111101101100101010011111,
         0b01111000111100010100011111111011,
         0b10111010111010110110011011101111,
         0b00000000000111000000000000000000},
        s21_NORMAL_VALUE},
    // 79228162514264337593543950335
    {
        {0b11111111111111111111111111111111,
         0b11111111111111111111111111111111,
         0b11111111111111111111111111111111,
         0b00000000000000000000000000000000},
        s21_NORMAL_VALUE},
};

s21_decimal tda_num2[] = {
    // 395.68501771927645764357678431
    {
        {0b11000111001110110110010101011111,
         0b00100111111100010011010010111010,
         0b01111111110110100100110000101011,
         0b00000000000110100000000000000000},
        s21_NORMAL_VALUE},
    // -0.9846338384359734587834004587
    {
        {0b11011100100001000111010001101011,
         0b01011110000101010100000011011100,
         0b00011111110100001011001101000001,
         0b10000000000111000000000000000000},
        s21_NORMAL_VALUE},
    // 63279453221.895482379768437348
    {
        {0b11011110001011000001101001100100,
         0b11010111111111001000001010101100,
         0b11001100011101111000100101110000,
         0b00000000000100100000000000000000},
        s21_NORMAL_VALUE},
    // -4679.9674638508347322436543543
    {
        {0b11000011110100011110010000110111,
         0b10111011111110010111111001111100,
         0b10010111001101111100100010010101,
         0b10000000000110010000000000000000},
        s21_NORMAL_VALUE},
    // 58.879889051434543543510763273
    {
        {0b10111111111100100000011100001001,
         0b01000011011101110101101010110001,
         0b10111110010000000100110101111101,
         0b00000000000110110000000000000000},
        s21_NORMAL_VALUE},
    // 375.80934892356580923763217665
    {
        {0b11000110110001100101010100000001,
         0b10110111011010100100000110001001,
         0b01111001011011100011100010000010,
         0b00000000000110100000000000000000},
        s21_NORMAL_VALUE},
    // -79228162514264337593543950335
    {
        {0b11111111111111111111111111111111,
         0b11111111111111111111111111111111,
         0b11111111111111111111111111111111,
         0b10000000000000000000000000000000},
        s21_NORMAL_VALUE},
};

s21_decimal tda_res_add[] = {
    // 3311.6952961090110454775813716
    {
        {0b01001100110110100001011001010100,
         0b01010011011000011001011010111101,
         0b01101011000000011011001110010001,
         0b00000000000110010000000000000000},
        s21_NORMAL_VALUE},
    // -0.9743554540762388709493958714
    {
        {0b00111110010101111110100000111010,
         0b00001010100100010100010101111001,
         0b00011111011110111010110111101110,
         0b10000000000111000000000000000000},
        s21_NORMAL_VALUE},
    // 439743784393135802167.23115583
    {
        {0b11111101000110110000111000111111,
         0b11100001010100110010111000011111,
         0b10001110000101101100000011010111,
         0b00000000000010000000000000000000},
        s21_NORMAL_VALUE},
    // -46634577254.269909173678299589
    {
        {0b11101000100011101101100111000101,
         0b10011001111000110110100110100011,
         0b10010110101011110011011111011010,
         0b10000000000100100000000000000000},
        s21_NORMAL_VALUE},
    // 4688.5649067707110011870875476
    {
        {0b10101010011110111000111101010100,
         0b11100001010010110000000011100100,
         0b10010111011111101110011001100000,
         0b00000000000110010000000000000000},
        s21_NORMAL_VALUE},
    // 381.59422847289056252337544230
    {
        {0b10000111010010110101110000100110,
         0b10010111010110000011000001010110,
         0b01111011010011001011110000011001,
         0b00000000000110100000000000000000},
        s21_NORMAL_VALUE},
    // 0
    {
        {0b00000000000000000000000000000000,
         0b00000000000000000000000000000000,
         0b00000000000000000000000000000000,
         0b00000000000000000000000000000000},
        s21_NORMAL_VALUE},
};

s21_decimal tda_res_sub[] = {
    // 2520.3252606704581301904278030
    {
        {0b10111110100110110000001000001110,
         0b01111110100101111011111101100100,
         0b01010001011011111010010001010101,
         0b00000000000110010000000000000000},
        s21_NORMAL_VALUE},
    // 0.9949122227957080466174050460
    {
        {0b01111010101100010000000010011100,
         0b10110001100110010011110001000000,
         0b00100000001001011011100010010100,
         0b00000000000111000000000000000000},
        s21_NORMAL_VALUE},
    // 439743784266576895723.44019107
    {
        {0b00111110101100110011100010100011,
         0b00110001101100000110110010100011,
         0b10001110000101101100000011010111,
         0b00000000000010000000000000000000},
        s21_NORMAL_VALUE},
    // -46634567894.334981472008835101
    {
        {0b11001011000001001001000000011101,
         0b00110010101100101000111111110100,
         0b10010110101011110011010111011111,
         0b10000000000100100000000000000000},
        s21_NORMAL_VALUE},
    // 4570.8051286678419141000660210
    {
        {0b10101011110000111000010011110010,
         0b01000001001110010100000110100011,
         0b10010011101100001101000001011001,
         0b00000000000110010000000000000000},
        s21_NORMAL_VALUE},
    // -370.02446937424105595188891100
    {
        {0b00000110010000010100110111011100,
         0b11010111011111000101001010111101,
         0b01110111100011111011010011101011,
         0b10000000000110100000000000000000},
        s21_NORMAL_VALUE},
    // Value was either too large or too small for a Decimal.
    {
        {0b00000000000000000000000000000000,
         0b00000000000000000000000000000000,
         0b00000000000000000000000000000000,
         0b00000000000000000000000000000000},
        s21_INFINITY},
};

s21_decimal tda_res_mul[] = {
    // 1153821.5786742344065050145758
    {
        {0b10110101110101101111001111011110,
         0b00100001001011110110100011000110,
         0b00100101010010000011000000111011,
         0b00000000000101100000000000000000},
        s21_NORMAL_VALUE},
    // -0.0101204450450457426603627389
    {
        {0b10111101011011010101001101111101,
         0b01000000100011101101001111011110,
         0b00000000010100111011011011100000,
         0b10000000000111000000000000000000},
        s21_NORMAL_VALUE},
    // Value was either too large or too small for a Decimal.
    {
        {0b00000000000000000000000000000000,
         0b00000000000000000000000000000000,
         0b00000000000000000000000000000000,
         0b00000000000000000000000000000000},
        s21_INFINITY},
    // 218248282338325.90810179831364
    {
        {0b11100011100010100000011001000100,
         0b01000011001000000110110001001010,
         0b01000110100001010001001100100101,
         0b00000000000011100000000000000000},
        s21_NORMAL_VALUE},
    // 272595.34018639976662298852721
    {
        {0b10110110101001001111110101110001,
         0b00110010100101011101010110011000,
         0b01011000000101001000111011011100,
         0b00000000000101110000000000000000},
        s21_NORMAL_VALUE},
    // 2174.0118170329863348903790520
    {
        {0b00001001111111001100011110111000,
         0b10000100101001100011100101011110,
         0b01000110001111110000000100010111,
         0b00000000000110010000000000000000},
        s21_NORMAL_VALUE},
    // Value was either too large or too small for a Decimal.
    {
        {0b00000000000000000000000000000000,
         0b00000000000000000000000000000000,
         0b00000000000000000000000000000000,
         0b00000000000000000000000000000000},
        s21_NEGATIVE_INFINITY},
};

s21_decimal tda_res_div[] = {
    // 7.3695241108636908302571365946
    {
        {0b01111011000100110110011000111010,
         0b10010111011000110101011001001001,
         0b11101110000111110100011001010001,
         0b00000000000111000000000000000000},
        s21_NORMAL_VALUE},
    // -0.0104387884698957026086644376
    {
        {0b00111110010110000110101010011000,
         0b10010001100011110000100010111101,
         0b00000000010101100101100011111110,
         0b10000000000111000000000000000000},
        s21_NORMAL_VALUE},
    // 6949234892.8466957548890267871
    {
        {0b00001010110010101010000011011111,
         0b11110111110111011110010011000000,
         0b11100000100010101011100101000111,
         0b00000000000100110000000000000000},
        s21_NORMAL_VALUE},
    // 9964721.535890753722313086459
    {
        {0b10111111011100000001010111111011,
         0b11011111000011010000010001111011,
         0b00100000001100101001111111011100,
         0b00000000000101010000000000000000},
        s21_NORMAL_VALUE},
    // 78.629309468892066287177692088
    {
        {0b11010010010000111111001110111000,
         0b01011100010000101001100000111110,
         0b11111110000100001010001111101111,
         0b00000000000110110000000000000000},
        s21_NORMAL_VALUE},
    // 0.0153931230446885827445702874
    {
        {0b00010100110001101100000011011010,
         0b10111001001000110011111001010001,
         0b00000000011111110101010000110100,
         0b00000000000111000000000000000000},
        s21_NORMAL_VALUE},
    // -1
    {
        {0b00000000000000000000000000000001,
         0b00000000000000000000000000000000,
         0b00000000000000000000000000000000,
         0b10000000000000000000000000000000},
        s21_NORMAL_VALUE},
};

#define TDA_SIZE (int)(sizeof(tda_num1) / sizeof(tda_num1[0]))

#endif  // SRC_MAIN_H_
